!function(){function e(e){if("string"==typeof e){var r;if(t.FORMAT_A_REG.test(e)||t.FORMAT_B_REG.test(e))r=e;else{if(!t.FORMAT_C_REG.test(e))return-1;r=RegExp.$1+"-"+RegExp.$2+"-"+RegExp.$3}return Date.parse(r)}return e instanceof Date?e.getTime():-2}var t={FORMAT_A_REG:/^([12]\d{3})-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])( (0\d|1\d|2[0-4])(:[0-5]\d(:\d{2})?)?)?$/,FORMAT_B_REG:/^[12]\d{3}\/(0[1-9]|1[0-2])\/(0[1-9]|[12]\d|3[01])( (0\d|1\d|2[0-4])(:[0-5]\d(:\d{2})?)?)?$/,FORMAT_C_REG:/^[12]\d{3}(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])$( (0\d|1\d|2[0-4])(:[0-5]\d(:\d{2})?)?)?/,strToDate:function(t){return new Date(e(t))},daysBetween:function(){var t,r,a,n,s;if(!arguments.length)throw"请至少传入一个参数";if(t=arguments[0],r=arguments[1],1===arguments.length&&(r=new Date),n=e(t),s=e(r),n===-1||s===-1)throw"传入的不是日期格式[YYYY-MM-DD 或者 YYYY/MM/DD]的字符串";if(n===-2||s===-2)throw"传入的不是日期或者日志格式[YYYY-MM-DD 或者 YYYY/MM/DD]的字符串";return a=(n-s)/864e5,Math.floor(a)},isDateStr:function(e){return!!(t.FORMAT_A_REG.test(e)||t.FORMAT_B_REG.test(e)||t.FORMAT_C_REG.test(e))},isDate:function(e){return t.isDateStr(e)||e instanceof Date},isLeapYear:function(e){if(t.isDate(e)){var r;return e instanceof Date||(e=t.strToDate(e)),r=e.getFullYear(),0===r%4&&(r%100!==0||r%400===0)}throw"非日期字符串或者Date类型参数"},format:function(e,r){if(!t.isDate(e))throw"非日期字符串或者Date类型参数";var a=/^(yyyy)?(?:-)?(mm)?(?:-)?(dd)? ?(hh)?(?::)?(mi)?(?::)?(ss)?$/i;if(!a.test(r))throw"format字符串有误";var n=r,s=["日","一","二","三","四","五","六"];n=n.replace(/yyyy|YYYY/,this.getFullYear()),n=n.replace(/yy|YY/,this.getYear()%100>9?(this.getYear()%100).toString():"0"+this.getYear()%100);var i=this.getMonth()+1;return n=n.replace(/MM/,i>9?i.toString():"0"+i),n=n.replace(/M/g,i),n=n.replace(/w|W/g,s[this.getDay()]),n=n.replace(/dd|DD/,this.getDate()>9?this.getDate().toString():"0"+this.getDate()),n=n.replace(/d|D/g,this.getDate()),n=n.replace(/hh|HH/,this.getHours()>9?this.getHours().toString():"0"+this.getHours()),n=n.replace(/h|H/g,this.getHours()),n=n.replace(/mm/,this.getMinutes()>9?this.getMinutes().toString():"0"+this.getMinutes()),n=n.replace(/m/g,this.getMinutes()),n=n.replace(/ss|SS/,this.getSeconds()>9?this.getSeconds().toString():"0"+this.getSeconds()),n=n.replace(/s|S/g,this.getSeconds())}},r={dateAdd:function(e,t){var r=this;switch(e){case"s":return new Date(Date.parse(r)+1e3*t);case"n":return new Date(Date.parse(r)+6e4*t);case"h":return new Date(Date.parse(r)+36e5*t);case"d":return new Date(Date.parse(r)+864e5*t);case"w":return new Date(Date.parse(r)+6048e5*t);case"q":return new Date(r.getFullYear(),r.getMonth()+3*t,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds());case"m":return new Date(r.getFullYear(),r.getMonth()+t,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds());case"y":return new Date(r.getFullYear()+t,r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds())}},dateDiff:function(e,t){var r=this;switch("string"==typeof t&&(t=strToDate(t)),e){case"s":return parseInt((t-r)/1e3);case"n":return parseInt((t-r)/6e4);case"h":return parseInt((t-r)/36e5);case"d":return parseInt((t-r)/864e5);case"w":return parseInt((t-r)/6048e5);case"m":return t.getMonth()+1+12*(t.getFullYear()-r.getFullYear())-(r.getMonth()+1);case"y":return t.getFullYear()-r.getFullYear()}},toString:function(e){var t=this,r=t.toLocaleDateString();if(e){var a=["日","一","二","三","四","五","六"];r+=" 星期"+a[t.getDay()]}return r},toArray:function(){var e=this,t=Array();return t[0]=e.getFullYear(),t[1]=e.getMonth(),t[2]=e.getDate(),t[3]=e.getHours(),t[4]=e.getMinutes(),t[5]=e.getSeconds(),t},datePart:function(e){var t=this,r="",a=["日","一","二","三","四","五","六"];switch(e){case"y":r=t.getFullYear();break;case"m":r=t.getMonth()+1;break;case"d":r=t.getDate();break;case"w":r=a[t.getDay()];break;case"ww":r=t.WeekNumOfYear();break;case"h":r=t.getHours();break;case"n":r=t.getMinutes();break;case"s":r=t.getSeconds()}return r},maxDayOfMonth:function(){var e=this,t=e.toArray(),r=new Date(t[0],t[1]+1,1),a=r.dateAdd("d",-1);return t=a.toArray(),t[2]}},a=function(e,t,r){for(var a in t)!t.hasOwnProperty(a)||e.hasOwnProperty(a)&&!r||(e[a]=t[a])};a(Date,t,!0),a(Date.prototype,r,!0)}();